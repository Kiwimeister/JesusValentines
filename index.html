<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Is Jesus your Valentine?</title>
  <style>
    :root{
      --bg1:#ffffff;
      --bg2:#f5f2ea;   /* warm off-white */
      --card:#ffffff;
      --ink:#0f0f0f;
      --muted:#3b3b3b;
      --border:rgba(15,15,15,.12);
      --shadow:0 18px 60px rgba(0,0,0,.10);
      --accent:#111111; /* keep it pure black */
      --soft:#faf7f0;
    }
    *{box-sizing:border-box}

    body{
      margin:0;
      min-height:100vh;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background:
        radial-gradient(900px 600px at 20% 10%, rgba(0,0,0,.04), transparent 55%),
        radial-gradient(900px 600px at 80% 90%, rgba(0,0,0,.03), transparent 55%),
        linear-gradient(135deg, var(--bg1), var(--bg2));
      color:var(--ink);
      /* full-bleed layout: the card will fill the viewport */
      display:block;
      padding:0;
      overflow:auto;
    }

    .card{
      width:100vw;
      min-height:100vh;
      height:auto;
      display:flex;
      flex-direction:column;
      border-radius:0;
      overflow:hidden;
      background: var(--card);
      border:0;
      box-shadow:none;
      position:relative;
    }

    .topbar{
      padding: max(16px, env(safe-area-inset-top)) max(18px, env(safe-area-inset-right)) 16px max(18px, env(safe-area-inset-left));
      background: linear-gradient(90deg, rgba(0,0,0,.06), rgba(0,0,0,.03));
      border-bottom:1px solid var(--border);
      color:rgba(15,15,15,.9);
      font-weight:800;
      letter-spacing:.2px;
      display:flex;
      justify-content:space-between;
      gap:12px;
      flex-wrap:wrap;
    }

    .pill{
      padding:6px 10px;
      border:1px solid rgba(0,0,0,.14);
      border-radius:999px;
      background: rgba(255,255,255,.85);
      font-size:12px;
      font-weight:800;
      color:rgba(15,15,15,.75);
    }

    .content{
      flex:1;
      min-height:0;
      padding: 22px max(20px, env(safe-area-inset-right)) 18px max(20px, env(safe-area-inset-left));
      display:flex;
      flex-direction:column;
      gap:14px;
      overflow:auto;
      -webkit-overflow-scrolling: touch;
    }

    h1{
      margin:0;
      font-size: clamp(34px, 5vw, 56px);
      line-height:1.12;
      letter-spacing:-.4px;
      text-align:center;
    }

    .sub{
      margin:0;
      color:var(--muted);
      font-size: clamp(14px, 2.6vw, 18px);
      line-height:1.45;
      text-align:center;
    }

    .btnRow{
      display:flex;
      flex-wrap:wrap;
      gap:14px;
      justify-content:center;
      align-items:stretch;
      margin-top:18px;
      overflow: visible;
    }

    .btnWrap{
      display:flex;
      justify-content:center;
      align-items:center;
      /* reserve space so transforms don't reflow layout */
      width: min(320px, 44vw);
      max-width: 100%;
    }

    /* keep the choice row stable inside the box too */
    .box .btnRow{
      flex-wrap: wrap;
      gap:18px;
      justify-content:center;
      align-items:center;
      overflow: visible;
    }

    button{
      border:0;
      border-radius:18px;
      padding:14px 18px;
      font-weight:900;
      cursor:pointer;
      font-size: clamp(16px, 2.6vw, 20px);
      min-height:56px;
      letter-spacing:.2px;
      transform-origin:center center;
      transition: transform 160ms ease;
    }

    button.big{
      border-radius:22px;
      padding:24px 30px;
      font-size: clamp(30px, 8vw, 44px);
      min-height:96px;
      min-width:min(280px, 44vw);
    }

    .primary{
      background: linear-gradient(180deg, rgba(15,15,15,.95), rgba(15,15,15,.82));
      color:white;
      box-shadow: 0 12px 26px rgba(0,0,0,.16);
    }

    .ghost{
      background: rgba(0,0,0,.04);
      color: var(--ink);
      border:1px solid rgba(0,0,0,.14);
    }

    .tiny{
      background: rgba(0,0,0,.05);
      color:#101010;
      border:1px solid rgba(0,0,0,.14);
    }

    /* FIRST SCREEN: no box; YES/NO higher up + side-by-side */
    .hero{
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:10px;
    }
    .hero .btnRow{
      margin-top: clamp(18px, 18vh, 220px);
      flex-wrap:nowrap;
    }

    /* MESSAGE BOX PAGES */
    .box{
      border:1px solid rgba(0,0,0,.12);
      background: rgba(250,247,240,.85);
      border-radius:16px;
      padding:16px;
      display:flex;
      flex-direction:column;
      gap:16px;
      max-height:none;
      overflow:visible;
      -webkit-overflow-scrolling: touch;
    }
    .boxText{
      white-space:pre-wrap;
      font-size: clamp(16px, 2.6vw, 20px);
      line-height:1.6;
      text-align:center;
    }
    .box .btnRow{
      margin-top: 8px;
      padding-top: 10px;
      border-top: 1px solid rgba(0,0,0,.12);
    }

    .footer{
      color:rgba(15,15,15,.72);
      font-size:12px;
      padding: 0 max(20px, env(safe-area-inset-right)) max(18px, env(safe-area-inset-bottom)) max(20px, env(safe-area-inset-left));
      text-align:center;
    }

    /* YES/NO "wall" (used on 13/14) */
    .choiceWall{
      position:relative;
      width:100%;
      height: clamp(320px, 56vh, 640px);
      border-radius:20px;
      overflow:hidden;
      border:1px solid rgba(0,0,0,.12);
      background: rgba(250,247,240,.85);
      box-shadow: var(--shadow);
    }
    .wallYes,
    .wallNo{
      position:absolute;
      top:0;
      bottom:0;
      border:0;
      cursor:pointer;
      font-weight:900;
      letter-spacing:.2px;
      transition: transform 160ms ease;
      display:flex;
      align-items:center;
      justify-content:center;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
    }
    .wallYes{
      left:0;
      width:90%;
      border-radius:20px 0 0 20px;
      background: linear-gradient(180deg, rgba(15,15,15,.95), rgba(15,15,15,.82));
      color:#fff;
      font-size: clamp(44px, 9vw, 96px);
    }
    .wallNo{
      right:0;
      width:10%;
      min-width: 72px; /* always reachable */
      border-radius:0 20px 20px 0;
      background: rgba(0,0,0,.04);
      color: var(--ink);
      border-left:1px solid rgba(0,0,0,.12);
      font-size: clamp(12px, 2.2vw, 16px);
    }
    .wallNo span{opacity:.9}

    /* MOBILE: stack YES/NO vertically inside the wall */
    .choiceWall.vertical{
      height: clamp(360px, 64vh, 760px);
    }
    .choiceWall.vertical .wallYes,
    .choiceWall.vertical .wallNo{
      left:0;
      right:0;
      width:100% !important;
    }
    .choiceWall.vertical .wallYes{
      top:0;
      bottom:auto;
      border-radius:20px 20px 0 0;
    }
    .choiceWall.vertical .wallNo{
      top:auto;
      bottom:0;
      border-radius:0 0 20px 20px;
      border-left:0;
      border-top:1px solid rgba(0,0,0,.12);
      min-width: 0;
    }

    /* Full-screen YES overlay (used on 14/14) */
    .fullYesOverlay{
      position:fixed;
      inset:0;
      z-index:9999;
      background:
        radial-gradient(900px 600px at 20% 10%, rgba(0,0,0,.04), transparent 55%),
        radial-gradient(900px 600px at 80% 90%, rgba(0,0,0,.03), transparent 55%),
        linear-gradient(135deg, var(--bg1), var(--bg2));
      display:flex;
      align-items:stretch;
      justify-content:stretch;
    }
    .fullYesOverlay button{
      width:100vw;
      height:100vh;
      border-radius:0;
      margin:0;
      background: linear-gradient(180deg, rgba(15,15,15,.98), rgba(15,15,15,.86));
      color:#fff;
      font-weight:900;
      letter-spacing:.3px;
      font-size: clamp(44px, 10vw, 120px);
      border:0;
    }
    .fullYesHint{
      position:fixed;
      left: max(14px, env(safe-area-inset-left));
      right: max(14px, env(safe-area-inset-right));
      bottom: max(14px, env(safe-area-inset-bottom));
      z-index:10000;
      text-align:center;
      font-size: 12px;
      color: rgba(15,15,15,.72);
      pointer-events:none;
      line-height:1.35;
    }

    @media (max-width: 520px){
      .topbar{padding: max(14px, env(safe-area-inset-top)) max(14px, env(safe-area-inset-right)) 14px max(14px, env(safe-area-inset-left));}
      .content{padding: 18px max(14px, env(safe-area-inset-right)) 14px max(14px, env(safe-area-inset-left));}
      .footer{padding: 0 max(14px, env(safe-area-inset-right)) max(14px, env(safe-area-inset-bottom)) max(14px, env(safe-area-inset-left));}
      .hero .btnRow{flex-wrap:wrap;}
      button.big{min-width: min(320px, 100%);}
      .btnWrap{width:100%;}
      .box{max-height:none;}
      .choiceWall{height: clamp(360px, 64vh, 760px); border-radius:18px;}
      .wallYes{font-size: clamp(40px, 12vw, 88px);}
    }
  </style>
</head>

<body>
  <div class="card">
    <div class="topbar">
      <div>ü§ç holiness.exe</div>
      <div class="pill" id="stagePill">stage: question</div>
    </div>

    <div class="content">
      <h1 id="title">Is Jesus your Valentine? ü§ç</h1>
      <p class="sub" id="subtitle">one question. one decision. choose wisely.</p>
      <div id="screen"></div>
    </div>

    <div class="footer" id="footer"></div>
  </div>

<script>
  const stagePill = document.getElementById('stagePill');
  const title = document.getElementById('title');
  const subtitle = document.getElementById('subtitle');
  const screen = document.getElementById('screen');
  const footer = document.getElementById('footer');
  let noCount = 0; // how many times they've said no

  function setTopbarVisible(isVisible){
    const tb = document.querySelector('.topbar');
    if(tb) tb.style.display = isVisible ? 'flex' : 'none';
  }

  function renderButtons(container, buttons){
    container.innerHTML = '';
    buttons.forEach(b=>{
      const wrap = document.createElement('div');
      wrap.className = 'btnWrap';

      const btn = document.createElement('button');
      btn.className = b.kind;
      btn.textContent = b.label;
      btn.addEventListener('click', b.onClick);

      wrap.appendChild(btn);
      container.appendChild(wrap);
    });
  }

  function showBox(stageLabel, h, sub, text, buttons, footerText=''){
    setTopbarVisible(true);
    stagePill.textContent = stageLabel;
    title.textContent = h;
    subtitle.textContent = sub;
    footer.textContent = footerText;

    screen.innerHTML = `
      <div class="box" id="box">
        <div class="boxText" id="boxText"></div>
        <div class="btnRow" id="boxBtns"></div>
      </div>
    `;
    document.getElementById('boxText').textContent = text;
    renderButtons(document.getElementById('boxBtns'), buttons);

    document.getElementById('box').scrollTop = 0;
  }

  function showQuestion(){
    setTopbarVisible(true);
    const overlay = document.querySelector('.fullYesOverlay');
    const hint = document.querySelector('.fullYesHint');
    if(overlay) overlay.remove();
    if(hint) hint.remove();

    noCount = 0;
    stagePill.textContent = 'stage: question';
    title.textContent = 'Is Jesus your Valentine? ü§ç';
    subtitle.textContent = 'one question. one decision. choose wisely.';
    footer.textContent = '';

    screen.innerHTML = `
      <div class="hero">
        <div class="choiceWall" id="choiceWall" aria-label="choices">
          <button class="wallYes" id="wallYes" type="button">YES ü§ç</button>
          <button class="wallNo" id="wallNo" type="button"><span>NO üòÖ</span></button>
        </div>
      </div>
    `;

    document.getElementById('wallYes').addEventListener('click', ()=>showYes());
    document.getElementById('wallNo').addEventListener('click', ()=>showNo());

    // On the first screen keep it balanced
    layoutChoiceWall(50);
  }

  function showYes(){
    setTopbarVisible(true);
    const overlay = document.querySelector('.fullYesOverlay');
    const hint = document.querySelector('.fullYesHint');
    if(overlay) overlay.remove();
    if(hint) hint.remove();

    const persistenceLine = noCount >= 14
      ? `\nFun Fact: Jesus went through 14 stations of the cross for you ‚Äî and He never gave up on you.\n`
      : ``;

    showBox(
      'stage: correct',
      'Correct. ü§ç',
      'good answer, Brother/Sister.',
`Congrats! Jesus Christ chose you as well!

${noCount >= 14 ? `Fun Fact: Jesus went through 14 stations of the cross for you, and He never gave up on you.

` : ``}"The Lord has redeemed my soul from hell; I have beheld his glory, and I am encircled about eternally in the arms of his love." 
‚Äî 2 Nephi 4:21

Remember Him today.
Speak of Him.
Represent Him.

(and yes‚Ä¶ you still have to work.)

Also: the California Newport Beach Temple is waiting for you.`,
      [
        {label:"Perks of Being Jesus' valentines", kind:'ghost', onClick: ()=>showPerks()},
        {label:'restart', kind:'tiny', onClick: ()=>showQuestion()},
      ],
      'status: approved'
    );
  }

  function showPerks(){
    setTopbarVisible(true);
    const overlay = document.querySelector('.fullYesOverlay');
    const hint = document.querySelector('.fullYesHint');
    if(overlay) overlay.remove();
    if(hint) hint.remove();

    showBox(
      'stage: perks',
      "Perks of Being Jesus' Valentine ü§ç",
      'quick reminder (and a little hype).',
`‚Ä¢ you remember who you belong to, even on hard days
‚Ä¢ you walk with purpose (and you don‚Äôt walk alone)
‚Ä¢ repentance stays open. always.
‚Ä¢ you get strength beyond your own (grace hits different)
‚Ä¢ you become a safer, kinder, steadier disciple over time
‚Ä¢ you represent Him, and He backs you up
‚Ä¢ peace that doesn‚Äôt depend on your circumstances

California Newport Beach Temple is still waiting for you.`,
      [
        {label:'back', kind:'ghost', onClick: ()=>showYes()},
        {label:'restart', kind:'tiny', onClick: ()=>showQuestion()},
      ],
      'status: blessed'
    );
  }

  function layoutChoiceWall(yesPct){
    const wall = document.getElementById('choiceWall');
    const yes = document.getElementById('wallYes');
    const no = document.getElementById('wallNo');
    if(!wall || !yes || !no) return;

    const isMobile = window.matchMedia && window.matchMedia('(max-width: 520px)').matches;

    // toggle vertical mode class for mobile
    if(isMobile) wall.classList.add('vertical');
    else wall.classList.remove('vertical');

    // Keep NO reachable: enforce a minimum pixel size.
    const minNoPx = isMobile ? 84 : 78;

    if(isMobile){
      // Vertical layout: YES on top, NO on bottom
      const noPct = Math.max(0, 100 - yesPct);

      // Set initial % heights
      yes.style.height = `${yesPct}%`;
      no.style.height = `${noPct}%`;

      // Ensure both are full width
      yes.style.width = '100%';
      no.style.width = '100%';

      // After layout, enforce min NO height and give YES remaining space
      requestAnimationFrame(()=>{
        const wallH = wall.clientHeight || 0;
        if(!wallH) return;

        const desiredNoPx = Math.max(minNoPx, Math.round(wallH * (noPct/100)));
        const safeNoPx = Math.min(desiredNoPx, Math.max(minNoPx, wallH - 1));

        no.style.height = `${safeNoPx}px`;
        yes.style.height = `calc(100% - ${safeNoPx}px)`;

        // Layering: NO stays clickable until the final overlay
        no.style.zIndex = '3';
        yes.style.zIndex = '2';
      });

      return;
    }

    // Desktop/tablet: horizontal layout (existing behavior)
    const noPct = Math.max(0, 100 - yesPct);
    yes.style.width = `${yesPct}%`;
    no.style.width = `${noPct}%`;

    requestAnimationFrame(()=>{
      const wallW = wall.clientWidth || 0;
      if(!wallW) return;

      const desiredNoPx = Math.max(minNoPx, Math.round(wallW * (noPct/100)));
      const safeNoPx = Math.min(desiredNoPx, Math.max(minNoPx, wallW - 1));

      no.style.width = `${safeNoPx}px`;
      yes.style.width = `calc(100% - ${safeNoPx}px)`;

      no.style.zIndex = '3';
      yes.style.zIndex = '2';
    });
  }

  function showAttempt13(playfulText){
    stagePill.textContent = 'stage: try again';
    title.textContent = 'Are you sure? (13/14)';
    subtitle.textContent = 'He keeps asking‚Ä¶';
    footer.textContent = 'grace: still available';

    screen.innerHTML = `
      <div class="box">
        <div class="boxText">${playfulText}\n\nYou can still choose again.</div>
      </div>
      <div class="choiceWall" id="choiceWall" aria-label="choices">
        <button class="wallYes" id="wallYes" type="button">YES ü§ç</button>
        <button class="wallNo" id="wallNo" type="button"><span>NO üòÖ</span></button>
      </div>
    `;

    document.getElementById('wallYes').addEventListener('click', ()=>showYes());
    document.getElementById('wallNo').addEventListener('click', ()=>showNo());

    // 13th time: YES ~90%, NO stays reachable
    layoutChoiceWall(90);
  }

  function showAttempt14(){
    // Hide the top UI so YES truly fills the entire viewport
    setTopbarVisible(false);
    footer.textContent = '';

    // remove any previous overlay
    const old = document.querySelector('.fullYesOverlay');
    const oldHint = document.querySelector('.fullYesHint');
    if(old) old.remove();
    if(oldHint) oldHint.remove();

    const overlay = document.createElement('div');
    overlay.className = 'fullYesOverlay';
    overlay.innerHTML = `<button type="button" onclick="showYes()">YES ü§ç</button>`;
    document.body.appendChild(overlay);

    const hint = document.createElement('div');
    hint.className = 'fullYesHint';
    hint.textContent = 'Fun Fact: Jesus went through 14 stations of the cross for you ‚Äî and He never gave up on you. God is in relentless pursuit of you!';
    document.body.appendChild(hint);

    // keep the page text in sync (seen briefly during transitions)
    stagePill.textContent = 'stage: persistence';
    title.textContent = 'FINAL WARNING.';
    subtitle.textContent = 'You cannot say NO anymore.';
    screen.innerHTML = '';
  }

  function showNo(){
    noCount++;
    const playfulLines = [
`You said no. He smiles patiently.` ,
`You said no. He‚Äôs still at the door‚Ä¶ politely.` ,
`You said no. The knock was gentle though.` ,
`You said no. He brought cookies this time.` ,
`You said no. He waited anyway.` ,
`You said no. Not offended‚Ä¶ just hopeful.` ,
`You said no. He wrote your name in the dust (heart included).` ,
`You said no. He reread your story anyway.` ,
`You said no. He kept the seat next to Him open.` ,
`You said no. He still saved you a spot.` ,
`You said no. He checked again just in case.` ,
`You said no. He hasn‚Äôt left.` ,
`You said no. Still knocking‚Ä¶ softer now.` ,
`You said no. He already forgave that one.`
    ];
    const playfulText = playfulLines[Math.min(noCount-1, playfulLines.length-1)];

    // 14th time: YES fills the entire viewport
    if(noCount >= 14){
      showAttempt14();
      return;
    }

    // 13th time: YES takes ~90% of the choice area, NO stays reachable inside the wall
    if(noCount === 13){
      showAttempt13(playfulText);
      return;
    }

    // Attempts 1‚Äì12: render with the choice wall so Safari/iPhone layout stays stable
    stagePill.textContent = 'stage: try again';
    title.textContent = `Are you sure? (${noCount}/14)`;
    subtitle.textContent = 'He keeps asking‚Ä¶';
    footer.textContent = 'grace: still available';

    screen.innerHTML = `
      <div class="box">
        <div class="boxText">${playfulText}\n\nYou can still choose again.</div>
      </div>
      <div class="choiceWall" id="choiceWall" aria-label="choices">
        <button class="wallYes" id="wallYes" type="button">YES ü§ç</button>
        <button class="wallNo" id="wallNo" type="button"><span>NO üòÖ</span></button>
      </div>
    `;

    document.getElementById('wallYes').addEventListener('click', ()=>showYes());
    document.getElementById('wallNo').addEventListener('click', ()=>showNo());

    // Grow YES smoothly from ~55% to ~88% over attempts 1‚Äì12 (NO stays clickable)
    const minYes = 55;
    const maxYes = 88;
    const t = Math.min(noCount, 12) / 12; // 0..1
    const yesPct = Math.round(minYes + (maxYes - minYes) * t);
    layoutChoiceWall(yesPct);
    return;
  }

  showQuestion();

  // Re-layout on resize/orientation change (helps iPhone Safari)
  window.addEventListener('resize', () => {
    // If a choice wall exists, re-apply the most recent layout based on current noCount
    const wall = document.getElementById('choiceWall');
    if(!wall) return;

    if(noCount >= 13){
      layoutChoiceWall(noCount === 13 ? 90 : 90);
      return;
    }

    const minYes = 55;
    const maxYes = 88;
    const t = Math.min(noCount, 12) / 12;
    const yesPct = Math.round(minYes + (maxYes - minYes) * t);
    layoutChoiceWall(noCount === 0 ? 50 : yesPct);
  });
</script>
</body>
</html>
